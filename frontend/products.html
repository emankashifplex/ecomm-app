<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Catalog</title>
</head>
<body>
    <h1>Product Catalog</h1>

    <!-- Search Form -->
    <form id="searchForm">
        <label for="searchQuery">Search for products:</label>
        <input type="text" id="searchQuery" placeholder="Enter product name">
        <button type="submit">Search</button>
    </form>

    <!-- Product List -->
    <div id="productList">
    </div>

    <!-- Cart Management -->
    <div id="cartManagement">
        <h2>Cart</h2>
        <ul id="cartList">
        </ul>
    </div>

    <script>
        const searchForm = document.getElementById("searchForm");
        const productList = document.getElementById("productList");
        const cartList = document.getElementById("cartList");

        // Product catalog API URL (replace with the actual URL)
        const productCatalogURL = "http://localhost:8081/products/search";

        searchForm.addEventListener("submit", async (e) => {
            e.preventDefault();
            const searchQuery = searchForm.elements.searchQuery.value;

            // Fetch product data from the product catalog API
            try {
                const response = await fetch(`${productCatalogURL}?query=${searchQuery}`);
                if (response.status === 200) {
                    const products = await response.json();
                    displayProducts(products);
                } else {
                    productList.innerHTML = "No products found.";
                }
            } catch (error) {
                productList.innerHTML = "Error fetching products.";
                console.error(error);
            }
        });

        function displayProducts(products) {
            productList.innerHTML = ""; // Clear previous results
            if (products.length === 0) {
                productList.innerHTML = "No products found.";
                return;
            }

            const ul = document.createElement("ul");
            products.forEach((product) => {
                const li = document.createElement("li");
                li.textContent = `${product.name} - Price: $${product.price}`;
                const addToCartButton = document.createElement("button");
                addToCartButton.textContent = "Add to Cart";
                addToCartButton.addEventListener("click", () => {
                });
                li.appendChild(addToCartButton);
                ul.appendChild(li);
            });

            productList.appendChild(ul);
        }
    </script>
</body>
</html>
